!function(){window.M43_FORM_BRAND&&document&&document.documentElement&&(document.documentElement.dataset.m43Brand=window.M43_FORM_BRAND);const e=!!window.M43_DEBUG;function t(){e&&console.log.apply(console,["[M43]",...arguments])}function n(){return!!window.M43_PROFILE}function r(e){return n()&&window.performance&&performance.now?{label:e,start:performance.now()}:null}function o(e){if(!(n()&&e&&window.performance&&performance.now))return;const t=performance.now()-e.start;console.log("[M43 PROFILE]",e.label+":",t.toFixed(2)+"ms")}const i={mask:"(000) 000-0000",lazy:!0,placeholderChar:"_"},a={promise:null};function s(e){if(!e||"true"===e.dataset.m43MaskApplied)return;if(e.disabled)return;const t=(e.getAttribute("type")||"").toLowerCase();t&&"tel"!==t&&"text"!==t||(window.IMask?Promise.resolve(window.IMask):(a.promise||(a.promise=new Promise((e,t)=>{const n=document.querySelector("script[data-m43-imask]");if(n)return n.addEventListener("load",()=>e(window.IMask)),void n.addEventListener("error",t);const r=document.createElement("script");r.src="https://cdn.jsdelivr.net/npm/imask@7.6.1/dist/imask.min.js",r.async=!0,r.defer=!0,r.setAttribute("data-m43-imask","true"),r.onload=()=>e(window.IMask),r.onerror=t,document.head.appendChild(r)})),a.promise)).then(t=>{if(!t||"true"===e.dataset.m43MaskApplied)return;try{e.__m43IMask&&"function"==typeof e.__m43IMask.destroy&&e.__m43IMask.destroy()}catch(e){}e.__m43IMask=null;const n=t(e,i);e.__m43IMask=n,e.dataset.m43MaskApplied="true",n.on("accept",()=>{y(e),e.classList.contains("calc-phone")&&b(e)}),n.on("complete",()=>{y(e),e.classList.contains("calc-phone")&&b(e)});try{n.updateValue()}catch(e){}y(e)}).catch(()=>{})}const c={selectors:{form:"form",email:"input.calc-email",confirmEmail:"input.calc-confirmEmail",phone:"input.calc-phone",contactLookupIdentifier:"input.calc-contactLookupIdentifier",formName:"input.calc-formName",formTitle:".wFormTitle"},messages:{emailRequired:"Email is required.",emailInvalid:"Enter a valid email address.",confirmRequired:"Please confirm your email.",emailMismatch:"Email addresses must match.",phoneRequired:"Phone number is required.",phoneInvalid:"Enter a valid 10-digit phone number."}};function l(e,t){const n=Array.isArray(e)?e.slice():{...e};return t&&"object"==typeof t?(Object.keys(t).forEach(r=>{const o=e?e[r]:void 0,i=t[r];i&&"object"==typeof i&&!Array.isArray(i)?n[r]=l(o||{},i):n[r]=i}),n):n}const u=function(){const e=window.M43_FORM_CONFIG;return l(c,e)}();function d(e,t){if(!e)return;e.classList.add("m43-field-container-error");const n=e.querySelector("input, textarea, select"),r=document.createElement("div");r.className="m43-inline-error",r.textContent=t;const o=(n&&n.id?n.id:"m43")+"-error";if(r.id=o,n){n.setAttribute("aria-invalid","true");const e=n.getAttribute("aria-describedby");e?e.split(" ").includes(o)||n.setAttribute("aria-describedby",e+" "+o):n.setAttribute("aria-describedby",o)}e.appendChild(r)}function m(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function f(e){if(!e)return"";const t=e.__m43IMask;return t&&"string"==typeof t.unmaskedValue?t.unmaskedValue:(e.value||"").replace(/\D/g,"")}const p="boolean"!=typeof window.M43_ENABLE_IDENTIFIER||window.M43_ENABLE_IDENTIFIER,h={"à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","ā":"a","ă":"a","ą":"a","æ":"ae","ç":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ď":"d","đ":"d","è":"e","é":"e","ê":"e","ë":"e","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","ğ":"g","ġ":"g","ģ":"g","ĥ":"h","ì":"i","í":"i","î":"i","ï":"i","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","ñ":"n","ń":"n","ņ":"n","ň":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ō":"o","ŏ":"o","ő":"o","œ":"oe","ŕ":"r","ŗ":"r","ř":"r","ś":"s","ŝ":"s","ş":"s","š":"s","ß":"ss","ţ":"t","ť":"t","ț":"t","ù":"u","ú":"u","û":"u","ü":"u","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","ý":"y","ÿ":"y","ź":"z","ż":"z","ž":"z","þ":"th"};function v(e){if(!e)return null;const t=function(e){let t="";for(let n=0;n<e.length;n++){const r=e.charAt(n);t+=h[r]||r}return t}(e.trim().toLowerCase());return t.length?t:null}function g(e){if(!e)return;const t=e.querySelector("input.calc-fname"),n=e.querySelector("input.calc-lname"),r=e.querySelector(u.selectors.phone),o=e.querySelector(u.selectors.contactLookupIdentifier);if(!(t&&n&&r&&o))return;o.hasAttribute("readonly")||o.setAttribute("readonly","readonly");const i=v(t.value),a=function(e){const t=v(e);if(!t)return null;const n=t.replace(/[^a-z0-9]/g,"");return n.length?n:null}(n.value),s=function(e){const t=f(e);return t&&t.length?t:null}(r);if(!i||!a||!s)return void(o.value="");const c=i.substring(0,1);o.value=c+a+s}function y(e){if(!e||!e.classList)return;const t=e.getAttribute&&e.getAttribute("type")||"";if("button"===t||"submit"===t||"reset"===t)return;if("radio"===t||"checkbox"===t||"hidden"===t)return;const n=(e.value||"").toString().trim();e.classList.toggle("m43-has-value",n.length>0)}function E(e){const n=r("validateForm");let i=!0;!function(e){e.querySelectorAll(".m43-inline-error").forEach(e=>e.remove()),e.querySelectorAll(".oneField.m43-field-container-error").forEach(e=>e.classList.remove("m43-field-container-error"));const t=e.querySelector(".m43-error-summary");t&&(t.classList.add("m43-summary-resolving"),setTimeout(()=>{t.remove()},300)),e.querySelectorAll('[aria-invalid="true"]').forEach(e=>{e.removeAttribute("aria-invalid");const t=e.getAttribute("aria-describedby");if(!t)return;const n=t.split(" ").filter(e=>!e.endsWith("-error")).join(" ").trim();n?e.setAttribute("aria-describedby",n):e.removeAttribute("aria-describedby")})}(e);const a=[],s=u;t("validateForm called");const c=e.querySelector(s.selectors.email),l=e.querySelector(s.selectors.confirmEmail),p=e.querySelector(s.selectors.phone);if(c){const e=c.closest(".oneField"),t=(c.value||"").trim();t?m(t)||(d(e,s.messages.emailInvalid),a.push({message:s.messages.emailInvalid,fieldId:c.id}),i=!1):(d(e,s.messages.emailRequired),a.push({message:s.messages.emailRequired,fieldId:c.id}),i=!1)}if(l){const e=l.closest(".oneField"),t=c?(c.value||"").trim().toLowerCase():"",n=(l.value||"").trim().toLowerCase();n?t&&n&&t!==n&&(d(e,s.messages.emailMismatch),a.push({message:s.messages.emailMismatch,fieldId:l.id}),i=!1):(d(e,s.messages.confirmRequired),a.push({message:s.messages.confirmRequired,fieldId:l.id}),i=!1)}if(p){const e=p.closest(".oneField"),t=f(p);t?10!==t.length&&(d(e,s.messages.phoneInvalid),a.push({message:s.messages.phoneInvalid,fieldId:p.id}),i=!1):(d(e,s.messages.phoneRequired),a.push({message:s.messages.phoneRequired,fieldId:p.id}),i=!1)}if(e.querySelectorAll('input[type="date"]').forEach(e=>{const t=e.closest(".oneField"),n=e.value;if(e.hasAttribute("required")&&!n)return d(t,"Date is required."),a.push({message:"Date is required.",fieldId:e.id}),void(i=!1);n&&!I(n)&&(d(t,"Enter a valid calendar date."),a.push({message:"Enter a valid calendar date.",fieldId:e.id}),i=!1)}),!i){!function(e,t){if(!e||!t||!t.length)return;const n=e.querySelector(".m43-error-summary");n&&n.remove();const r=document.createElement("div");r.className="m43-error-summary",r.setAttribute("role","alert"),r.setAttribute("aria-live","assertive");const o=document.createElement("div");o.className="m43-error-summary-heading",o.textContent="Please correct the following:",r.appendChild(o);const i=document.createElement("ul");t.forEach(t=>{const n="string"==typeof t?t:t.message,r="string"==typeof t?null:t.fieldId,o=document.createElement("li"),a=document.createElement("a");a.href="#",a.textContent=n,a.addEventListener("click",function(t){t.preventDefault();let n=null;r&&(n=e.querySelector("#"+CSS.escape(r))),n||(n=e.querySelector('[aria-invalid="true"]')),n&&(n.focus({preventScroll:!1}),n.scrollIntoView({behavior:"smooth",block:"center"}))}),o.appendChild(a),i.appendChild(o)}),r.appendChild(i),e.prepend(r),r.scrollIntoView({behavior:"smooth",block:"start"})}(e,a);const t=e.querySelector(".m43-field-container-error");if(t){const e=t.querySelector("input, textarea, select");e&&(e.focus({preventScroll:!1}),e.scrollIntoView({behavior:"smooth",block:"center"}),t.classList.contains("m43-shake")||(t.classList.add("m43-shake"),setTimeout(()=>{t.classList.remove("m43-shake")},400)))}}return o(n),i}function b(e){if(!e)return!0;const t=e.closest("form");if(!t)return!0;const n=u,i=t.querySelector(n.selectors.email),a=t.querySelector(n.selectors.confirmEmail),s=e.closest(".oneField");if(!s)return!0;const c=r("validateField");s.querySelectorAll(".m43-inline-error").forEach(e=>e.remove());let l=!0;if(e.classList.contains("calc-email")){const t=(e.value||"").trim();if(t&&!m(t)&&(d(s,n.messages.emailInvalid),l=!1),a){const e=a.closest(".oneField");e?.querySelectorAll(".m43-inline-error").forEach(e=>e.remove());const r=t.toLowerCase(),o=(a.value||"").trim().toLowerCase();o&&r!==o&&d(e,n.messages.emailMismatch)}}if(e.classList.contains("calc-confirmEmail")){const t=i?(i.value||"").trim().toLowerCase():"",r=(e.value||"").trim().toLowerCase();r&&t&&t!==r&&(d(s,n.messages.emailMismatch),l=!1)}if(e.classList.contains("calc-phone")){const t=f(e);t&&10!==t.length&&(d(s,n.messages.phoneInvalid),l=!1)}if("date"===e.type){const t=e.value;t&&!I(t)&&(d(s,"Enter a valid calendar date."),l=!1)}return o(c),l}function w(e){if(!e)return;const t=e.querySelector(u.selectors.phone);if(!t)return;const n=f(t);n&&t.value!==n&&(t.value=n)}function L(e){if(!e)return;e.querySelectorAll('input[type="date"]').forEach(e=>{if(!e.value)return;const t=e.value.split("-");if(3===t.length){const[n,r,o]=t;n&&r&&o&&(e.value=`${n}-${r.padStart(2,"0")}-${o.padStart(2,"0")}`)}})}function I(e){if(!/^\d{4}-\d{2}-\d{2}$/.test(e))return!1;const t=e.split("-"),n=parseInt(t[0],10),r=parseInt(t[1],10),o=parseInt(t[2],10),i=new Date(n,r-1,o);return i.getFullYear()===n&&i.getMonth()===r-1&&i.getDate()===o}function S(e){const n=r("handleNavClick"),i=e.target.closest(".wfPageNextButton");if(!i)return void o(n);const a=i.closest("form");if(!a)return void o(n);w(a),L(a);const s=E(a);if(t("nav validation result:",s),!s)return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),o(n),!1;o(n)}function q(){if(!(window.wFORMS&&wFORMS.behaviors&&wFORMS.behaviors.paging&&wFORMS.behaviors.paging.run))return!1;if(wFORMS.behaviors.paging.run.__m43Wrapped)return!0;const e=wFORMS.behaviors.paging.run;function t(){const t=r("wrappedPagingRun"),n=document.querySelector(u.selectors.form);if(n&&w(n),n&&L(n),n&&!E(n))return o(t),!1;const i=e.apply(this,arguments);return o(t),i}return t.__m43Wrapped=!0,wFORMS.behaviors.paging.run=t,!0}if(document.addEventListener("submit",function(e){const n=r("handleSubmit"),i=e.target;if(!i||"FORM"!==i.tagName)return void o(n);const a=E(i);if(w(i),L(i),t("submit validation result:",a),!a)return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),o(n),!1;o(n)},!0),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(u.selectors.form).forEach(e=>{!function(e){if(!e)return;e.querySelectorAll('input[type="text"], input[type="email"], input[type="tel"], input[type="password"], textarea, select').forEach(e=>{y(e),e.addEventListener("input",()=>y(e)),e.addEventListener("change",()=>y(e)),e.addEventListener("blur",()=>y(e),!0)})}(e),function(e){if(!e)return;e.querySelectorAll(u.selectors.phone).forEach(e=>s(e))}(e),function(e){if(!e)return;e.querySelectorAll('input[type="date"]').forEach(e=>{if(e.min||(e.min="1900-01-01"),e.value){const t=e.value.split("-");if(3===t.length){const[n,r,o]=t;n&&r&&o&&(e.value=`${n}-${r.padStart(2,"0")}-${o.padStart(2,"0")}`)}}})}(e),p&&g(e),function(e){if(!e)return;const t=e.querySelector(u.selectors.formName);if(!t)return;const n=document.querySelector(u.selectors.formTitle),r=n?n.textContent.trim():"";r&&(t.hasAttribute("readonly")||t.setAttribute("readonly","readonly"),t.value=r)}(e)})}),document.addEventListener("input",function(e){const t=e.target;if(t&&"INPUT"===t.tagName&&(y(t),t.classList.contains("calc-phone")&&s(t),(t.classList.contains("calc-email")||t.classList.contains("calc-confirmEmail")||t.classList.contains("calc-phone"))&&b(t),t.classList.contains("calc-fname")||t.classList.contains("calc-lname")||t.classList.contains("calc-phone"))){const e=t.closest("form");e&&p&&g(e)}}),document.addEventListener("blur",function(e){const t=e.target;!t||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&"SELECT"!==t.tagName||(y(t),(t.classList.contains("calc-email")||t.classList.contains("calc-confirmEmail")||t.classList.contains("calc-phone"))&&b(t))},!0),document.addEventListener("mousedown",S,!0),document.addEventListener("click",S,!0),!q()){let e=0;const t=setInterval(function(){e++,(q()||e>50)&&clearInterval(t)},100)}}();